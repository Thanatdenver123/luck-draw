<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏ß‡∏á‡∏•‡πâ‡∏≠‡∏™‡∏∏‡πà‡∏°‡∏à‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• (‡∏°‡∏µ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û)</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        body { font-family: 'Sarabun', sans-serif; background: #f0f2f5; text-align: center; padding: 20px; }
        h1 { color: #333; margin-bottom: 10px; }
        
        .container { display: flex; flex-wrap: wrap; justify-content: center; gap: 30px; max-width: 1200px; margin: 0 auto; }
        
        /* --- ‡πÇ‡∏ã‡∏ô‡∏ß‡∏á‡∏•‡πâ‡∏≠ --- */
        .wheel-section { flex: 2; min-width: 320px; display: flex; flex-direction: column; align-items: center; }
        .wheel-container { position: relative; margin: 20px 0; }
        canvas { border-radius: 50%; box-shadow: 0 10px 30px rgba(0,0,0,0.3); transition: transform 0.2s; }
        .pointer { 
            position: absolute; top: -10px; left: 50%; transform: translateX(-50%);
            width: 0; height: 0; z-index: 10;
            border-left: 25px solid transparent; border-right: 25px solid transparent; border-top: 50px solid #ff3b3b; 
            filter: drop-shadow(0 4px 2px rgba(0,0,0,0.3));
        }
        #spinBtn {
            padding: 15px 50px; font-size: 28px; font-weight: bold; background: linear-gradient(135deg, #ff4757, #ff6b81);
            color: white; border: none; border-radius: 50px; cursor: pointer; 
            box-shadow: 0 5px 15px rgba(255, 71, 87, 0.4); transition: 0.3s;
        }
        #spinBtn:hover { transform: scale(1.05); box-shadow: 0 8px 20px rgba(255, 71, 87, 0.6); }
        #spinBtn:disabled { background: #ccc; cursor: not-allowed; transform: none; box-shadow: none; }

        /* --- ‡πÇ‡∏ã‡∏ô‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° --- */
        .control-section { flex: 1; min-width: 300px; text-align: left; background: white; padding: 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        .input-group { margin-bottom: 15px; border: 1px solid #eee; padding: 15px; border-radius: 10px; background: #fafafa; }
        input[type="text"] { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; margin-bottom: 10px; box-sizing: border-box; }
        input[type="file"] { margin-bottom: 10px; }
        button.add-btn { width: 100%; padding: 12px; background: #2ed573; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: bold; }
        button.add-btn:hover { background: #26af61; }
        
        /* ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠ */
        .stats { display: flex; justify-content: space-between; align-items: center; margin-top: 20px; }
        .winner-list { margin-top: 15px; max-height: 350px; overflow-y: auto; }
        .winner-item { display: flex; justify-content: space-between; align-items: center; background: #f1f2f6; padding: 10px; margin-bottom: 8px; border-radius: 8px; border-left: 5px solid #ffa502; }
        .winner-info { display: flex; align-items: center; gap: 10px; }
        .winner-thumb { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; border: 2px solid #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .restore-btn { background: #3742fa; color: white; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 12px; }

        /* --- Modal Popup --- */
        .modal { display: none; position: fixed; z-index: 999; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.7); backdrop-filter: blur(5px); }
        .modal-content { background-color: white; margin: 5% auto; padding: 40px; border-radius: 20px; width: 90%; max-width: 500px; text-align: center; position: relative; animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes popIn { from {transform: scale(0.5); opacity: 0;} to {transform: scale(1); opacity: 1;} }
        
        .winner-image-large { 
            width: 200px; height: 200px; object-fit: cover; border-radius: 50%; 
            border: 8px solid #ff4757; margin: 0 auto 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: none; /* ‡∏ã‡πà‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ */
        }
        .modal h2 { font-size: 48px; color: #ff4757; margin: 10px 0; text-shadow: 2px 2px 0px rgba(0,0,0,0.1); }
        .modal p { font-size: 18px; color: #555; }
        
        .modal-btn-group { display: flex; justify-content: center; gap: 15px; margin-top: 30px; }
        .btn-confirm { background: #2ed573; color: white; padding: 12px 25px; border: none; border-radius: 10px; cursor: pointer; font-size: 16px; transition: 0.2s; }
        .btn-confirm:hover { background: #26af61; transform: translateY(-2px); }
        .btn-cancel { background: #747d8c; color: white; padding: 12px 25px; border: none; border-radius: 10px; cursor: pointer; font-size: 16px; transition: 0.2s; }
        .btn-cancel:hover { background: #57606f; transform: translateY(-2px); }

    </style>
</head>
<body>

    <h1>üé° ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏°‡∏ä‡∏¥‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• Lucky Draw</h1>
    <p style="color:#666; font-size:14px;">(‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)</p>

    <div class="container">
        <div class="wheel-section">
            <div class="wheel-container">
                <div class="pointer"></div>
                <canvas id="wheelCanvas" width="500" height="500"></canvas>
            </div>
            <button id="spinBtn" onclick="spinWheel()">‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏•‡∏¢! (SPIN)</button>
        </div>

        <div class="control-section">
            <h3>üìù ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠ / ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç</h3>
            <div class="input-group">
                <label style="display:block; text-align:left; font-size:14px; margin-bottom:5px;">‡∏ä‡∏∑‡πà‡∏≠ ‡∏´‡∏£‡∏∑‡∏≠ ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç:</label>
                <input type="text" id="newName" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ô‡πâ‡∏≠‡∏á‡πÄ‡∏≠, 081, ‡πÅ‡∏ú‡∏ô‡∏Å IT" onkeypress="handleEnter(event)">
                
                <label style="display:block; text-align:left; font-size:14px; margin-bottom:5px;">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ):</label>
                <input type="file" id="newImage" accept="image/*">
                
                <button onclick="addCandidate()" class="add-btn">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
            </div>

            <div class="stats">
                <h4>‡πÉ‡∏ô‡∏ß‡∏á‡∏•‡πâ‡∏≠: <span id="candidateCount" style="color:#2ed573; font-size:20px;">0</span></h4>
                <button onclick="resetAll()" style="background:none; border:none; color:red; cursor:pointer; text-decoration:underline;">‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
            </div>

            <hr style="border-top: 1px solid #eee; margin: 20px 0;">

            <h3>üèÜ ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ú‡∏π‡πâ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</h3>
            <div id="winnerListContainer" class="winner-list">
                </div>
        </div>
    </div>

    <div id="resultModal" class="modal">
        <div class="modal-content">
            <p>üéâ ‡∏Ç‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏Å‡∏±‡∏ö üéâ</p>
            
            <img id="winnerImagePopup" class="winner-image-large" src="" alt="Winner">
            
            <h2 id="winnerNameDisplay">...</h2>
            
            <div class="modal-btn-group">
                <button onclick="confirmWin()" class="btn-confirm">‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô (‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•)</button>
                <button onclick="closeModal()" class="btn-cancel">‚ùå ‡πÇ‡∏°‡∏Ü‡∏∞ (‡∏´‡∏°‡∏∏‡∏ô‡πÉ‡∏´‡∏°‡πà)</button>
            </div>
            <p style="font-size:12px; color:#999; margin-top:15px;">*‡∏´‡∏≤‡∏Å‡∏Å‡∏î "‡πÇ‡∏°‡∏Ü‡∏∞" ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏à‡∏∞‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ß‡∏á‡∏•‡πâ‡∏≠</p>
        </div>
    </div>

    <script>
        // --- 1. ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Data Management) ---
        // ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: Array ‡∏Ç‡∏≠‡∏á Object { id: time, text: "Name", img: "Base64..." }
        let candidates = JSON.parse(localStorage.getItem('candidates_v2')) || [];
        let winners = JSON.parse(localStorage.getItem('winners_v2')) || [];
        let tempWinner = null; // ‡πÄ‡∏Å‡πá‡∏ö‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß

        function saveData() {
            // ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏π‡∏õ‡πÉ‡∏ô LocalStorage ‡∏°‡∏µ‡∏Ç‡∏µ‡∏î‡∏à‡∏≥‡∏Å‡∏±‡∏î (‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 5MB) ‡∏ñ‡πâ‡∏≤‡∏£‡∏π‡∏õ‡πÄ‡∏¢‡∏≠‡∏∞‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ
            try {
                localStorage.setItem('candidates_v2', JSON.stringify(candidates));
                localStorage.setItem('winners_v2', JSON.stringify(winners));
            } catch (e) {
                alert('‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥‡πÄ‡∏ï‡πá‡∏°! ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô');
            }
            updateUI();
        }

        function updateUI() {
            document.getElementById('candidateCount').innerText = candidates.length;
            renderWinners();
            drawWheel();
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏£‡∏π‡∏õ‡πÄ‡∏õ‡πá‡∏ô Base64
        const toBase64 = file => new Promise((resolve, reject) => {
            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = () => resolve(reader.result);
            reader.onerror = error => reject(error);
        });

        async function addCandidate() {
            const nameInput = document.getElementById('newName');
            const fileInput = document.getElementById('newImage');
            const name = nameInput.value.trim();
            const file = fileInput.files[0];

            if (!name) {
                alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç");
                return;
            }

            let imgData = null;
            if (file) {
                // ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏£‡∏π‡∏õ‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô (‡πÄ‡∏ä‡πà‡∏ô ‡∏ñ‡πâ‡∏≤‡∏£‡∏π‡∏õ‡πÉ‡∏´‡∏ç‡πà‡∏°‡∏≤‡∏Å ‡∏≠‡∏≤‡∏à‡∏ó‡∏≥‡πÉ‡∏´‡πâ browser ‡∏ä‡πâ‡∏≤)
                if (file.size > 2 * 1024 * 1024) {
                   if(!confirm("‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏°‡∏µ‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà‡∏Å‡∏ß‡πà‡∏≤ 2MB ‡∏≠‡∏≤‡∏à‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏ß‡πá‡∏ö‡∏ä‡πâ‡∏≤ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡πÑ‡∏´‡∏°?")) return;
                }
                imgData = await toBase64(file);
            }

            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á Array
            candidates.push({
                id: Date.now(),
                text: name,
                img: imgData
            });

            // Reset ‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å
            nameInput.value = '';
            fileInput.value = '';
            saveData();
        }

        function handleEnter(e) {
            if (e.key === 'Enter') addCandidate();
        }

        function renderWinners() {
            const container = document.getElementById('winnerListContainer');
            container.innerHTML = '';

            if (winners.length === 0) {
                container.innerHTML = '<p style="color:#aaa; text-align:center; padding:20px;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</p>';
                return;
            }

            winners.forEach(w => {
                const item = document.createElement('div');
                item.className = 'winner-item';
                
                // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏£‡∏π‡∏õ‡πÑ‡∏´‡∏°
                let imgHtml = w.img ? `<img src="${w.img}" class="winner-thumb">` : `<div class="winner-thumb" style="background:#ddd; display:flex; align-items:center; justify-content:center;">?</div>`;

                item.innerHTML = `
                    <div class="winner-info">
                        ${imgHtml}
                        <strong>${w.text}</strong>
                    </div>
                    <button onclick="restoreCandidate(${w.id})" class="restore-btn">‚Ü© ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤</button>
                `;
                container.appendChild(item);
            });
        }

        function restoreCandidate(id) {
            // ‡∏´‡∏≤ object ‡πÉ‡∏ô winners
            const winnerIndex = winners.findIndex(w => w.id === id);
            if (winnerIndex > -1) {
                const item = winners[winnerIndex];
                winners.splice(winnerIndex, 1); // ‡∏•‡∏ö‡∏à‡∏≤‡∏Å winners
                candidates.push(item); // ‡πÉ‡∏™‡πà‡∏Ñ‡∏∑‡∏ô candidates
                saveData();
            }
        }

        function resetAll() {
            if (confirm('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î? (‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ)')) {
                candidates = [];
                winners = [];
                saveData();
            }
        }

        // --- 2. ‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô‡∏ß‡∏á‡∏•‡πâ‡∏≠ ‡πÅ‡∏•‡∏∞ Canvas ---
        const canvas = document.getElementById('wheelCanvas');
        const ctx = canvas.getContext('2d');
        const colors = ['#FF6B6B', '#4ECDC4', '#FFE66D', '#1A535C', '#FF9F1C', '#C44D58', '#2A9D8F', '#D7263D'];
        
        let startAngle = 0;
        let arc = 0;
        let spinTimeout = null;
        let spinAngleStart = 10;
        let spinTime = 0;
        let spinTimeTotal = 0;
        let isSpinning = false;

        function drawWheel() {
            if (candidates.length === 0) {
                ctx.clearRect(0,0,500,500);
                ctx.font = '24px Sarabun';
                ctx.fillStyle = "#aaa";
                ctx.textAlign = "center";
                ctx.fillText("‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô...", 250, 250);
                return;
            }

            arc = (2 * Math.PI) / candidates.length;
            ctx.clearRect(0,0,500,500);
            
            // ‡∏Ç‡∏≠‡∏ö‡∏ô‡∏≠‡∏Å
            ctx.beginPath();
            ctx.arc(250, 250, 240, 0, 2 * Math.PI);
            ctx.lineWidth = 15;
            ctx.strokeStyle = '#fff';
            ctx.stroke();
            ctx.lineWidth = 1;

            for(let i = 0; i < candidates.length; i++) {
                let angle = startAngle + i * arc;
                ctx.fillStyle = colors[i % colors.length];
                
                ctx.beginPath();
                ctx.moveTo(250, 250);
                ctx.arc(250, 250, 230, angle, angle + arc);
                ctx.lineTo(250, 250);
                ctx.fill();

                // ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
                ctx.save();
                ctx.fillStyle = "white";
                ctx.translate(250 + Math.cos(angle + arc / 2) * 160, 
                              250 + Math.sin(angle + arc / 2) * 160);
                ctx.rotate(angle + arc / 2 + Math.PI / 2);
                let text = candidates[i].text;
                // ‡∏ï‡∏±‡∏î‡∏Ñ‡∏≥‡∏ñ‡πâ‡∏≤‡∏•‡πâ‡∏ô
                if(text.length > 15) text = text.substring(0,12) + "...";
                ctx.font = 'bold 22px Sarabun, Arial';
                ctx.fillText(text, -ctx.measureText(text).width / 2, 0);
                ctx.restore();
            }
        }

        function spinWheel() {
            if (isSpinning || candidates.length === 0) return;
            isSpinning = true;
            document.getElementById('spinBtn').disabled = true;
            
            spinAngleStart = Math.random() * 10 + 10; 
            spinTime = 0;
            spinTimeTotal = Math.random() * 3000 + 4000;
            rotateWheel();
        }

        function rotateWheel() {
            spinTime += 30;
            if(spinTime >= spinTimeTotal) {
                stopRotateWheel();
                return;
            }
            let spinAngle = spinAngleStart - easeOut(spinTime, 0, spinAngleStart, spinTimeTotal);
            startAngle += (spinAngle * Math.PI / 180);
            drawWheel();
            spinTimeout = setTimeout(rotateWheel, 30);
        }

        function stopRotateWheel() {
            clearTimeout(spinTimeout);
            let degrees = startAngle * 180 / Math.PI + 90; 
            let arcd = arc * 180 / Math.PI;
            let index = Math.floor((360 - degrees % 360) / arcd);
            
            tempWinner = candidates[index]; // ‡πÄ‡∏Å‡πá‡∏ö object ‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞‡πÑ‡∏ß‡πâ
            
            launchFireworks(); // ‡∏à‡∏∏‡∏î‡∏û‡∏•‡∏∏

            setTimeout(() => {
                isSpinning = false;
                document.getElementById('spinBtn').disabled = false;
                showModal(tempWinner);
            }, 600);
        }

        function easeOut(t, b, c, d) {
            let ts = (t/=d)*t;
            let tc = ts*t;
            return b+c*(tc + -3*ts + 3*t);
        }

        // --- 3. ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• (Modal & Fireworks) ---
        function showModal(winnerObj) {
            const modal = document.getElementById('resultModal');
            const imgEl = document.getElementById('winnerImagePopup');
            const nameEl = document.getElementById('winnerNameDisplay');

            // ‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠
            nameEl.innerText = winnerObj.text;
            
            // ‡πÉ‡∏™‡πà‡∏£‡∏π‡∏õ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
            if (winnerObj.img) {
                imgEl.src = winnerObj.img;
                imgEl.style.display = 'block';
            } else {
                imgEl.style.display = 'none';
            }

            modal.style.display = "block";
        }

        function closeModal() {
            document.getElementById('resultModal').style.display = "none";
        }

        function confirmWin() {
            // ‡∏¢‡πâ‡∏≤‡∏¢‡∏à‡∏≤‡∏Å candidates -> winners
            const idx = candidates.findIndex(c => c.id === tempWinner.id);
            if(idx !== -1) {
                candidates.splice(idx, 1); // ‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ß‡∏á‡∏•‡πâ‡∏≠
                winners.unshift(tempWinner); // ‡πÉ‡∏™‡πà‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞
                saveData();
            }
            closeModal();
        }

        function launchFireworks() {
            var duration = 3 * 1000;
            var animationEnd = Date.now() + duration;
            var defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };
            var interval = setInterval(function() {
                var timeLeft = animationEnd - Date.now();
                if (timeLeft <= 0) return clearInterval(interval);
                var particleCount = 50 * (timeLeft / duration);
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: 0.1, y: 0.6 } }));
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: 0.9, y: 0.6 } }));
            }, 250);
        }

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö
        updateUI();

    </script>
</body>
</html>